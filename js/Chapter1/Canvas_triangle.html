<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Canvas 2D Context：三角形の描画</title>
<style>
*{padding:0px; margin:0px}
#canvas_test{                /* id名をセレクタとしてスタイルを指定 */
	width: 500px;              /* 横幅を指定 */
	height: 500px;             /* 縦幅を指定 */
	background-color:#EEEEEE;  /* 背景色を指定 */
}
</style>
<script>
////////////////////////////////////////////////////////////////////
// windowイベントの定義
////////////////////////////////////////////////////////////////////
//HTML文書読み込み完了後に実行するイベントの定義
window.addEventListener('load', function () {
	drawStart();        //描画開始関数
});
////////////////////////////////////////////////////////////////////
// 描画開始関数の定義
////////////////////////////////////////////////////////////////////
function drawStart() {
	var canvasElement = document.getElementById('canvas_test');  //canvas要素の取得
	canvasElement.width = canvasElement.clientWidth;             //描画横幅の指定
	canvasElement.height = canvasElement.clientHeight;           //描画縦幅の指定
	var context = canvasElement.getContext('2d');                //コンテキストの取得
	//パスの設定
	context.beginPath();             //パスの開始
	context.moveTo(250, 50);         //パスの始点の指定
	context.lineTo(50, 450);         //次の座標までパスを引く
	context.lineTo(450, 450);        //次の座標までパスを引く
	context.closePath();             //パスの終了
	//線の設定
	context.strokeStyle = '#FF0000'; //線色の指定
	context.lineWidth = 10;          //線幅の指定
	context.stroke();                //線の描画
	//塗りの設定
	context.fillStyle = 'blue';   //塗りつぶし色の指定
	context.fill();               //塗りつぶしの実行
}

//画像作成用イベント
window.addEventListener('keydown', function (e) {

	//キーボードイベント時のキー取得
	var keyChar = String.fromCharCode( e.keyCode ).toLowerCase();

	//キーボードの「s」が押された場合
	if(keyChar == "s") {

		//グラフィックスが描画されたcanvas要素
//		var canvas = renderer.domElement;
		var canvas = document.getElementById('canvas_test');

		//a要素の生成
		var a = document.createElement("a");
		//canvas要素→DataURL形式
		a.href = canvas.toDataURL("image/png");
		//PNGファイル名の命名
		a.download = "picture";
		a.innerHTML = "ダウンロード";

		//id="thumbnails"のdiv要素の子要素にa要素を追加	
		document.getElementsByTagName( "body" )[0].appendChild(a);

	}
});

</script>
</head>
<body>
<canvas id="canvas_test"></canvas>
</body>
</html>
